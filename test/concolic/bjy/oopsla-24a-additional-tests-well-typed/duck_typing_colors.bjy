
let color_type = {. int | fun i -> i >= 0 and i < 256 }
in

let point = {: x : int , y : int :}
in

let colored_point = {: x : int , y : int , color : color_type :}
in

let get_color (p : colored_point) : color_type =
  p.color
in

let result = get_color { x = 0 , y = 0 , color = 255 } # this is fine
in

get_color
